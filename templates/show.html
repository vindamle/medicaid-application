{% extends 'base.html' %}

{% block title %}Patient Show Page{% endblock %}

{% block content %}
<div class="alertDiv">
	<div class="alert alert-danger alert-dismissible fade show" role="alert">
		<strong>Alert:</strong> RFI due within 10 days
		<button type="button" class="close" data-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="alert alert-danger alert-dismissible fade show" role="alert">
		<strong>Alert:</strong> NCS Discrepancy
		<button type="button" class="close" data-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
</div>

<div class="container-fluid residentInfoDiv">
	<h1 class="">{{alert.first_name}} {{alert.last_name}}</h1>
	<p class="centered">Double-click a field to edit. Press 'Enter' to save your edit.</p>
	<button class="btn" id="editBtn">Edit</button>

	<section>
		<h4>Personal Information:</h4>
		<ul>
			<div class="row">
				<div class="col-lg-4">
					<li>
						<label>Resident Name:</label> 
						<span class="">{{alert.first_name}} {{alert.last_name}}</span>
					</li>
					<!-- 
					EXPERIMENTING WITH RADIO BUTTONS AND SELECT DROPDOWNS:
					<li>
						<label>Short-Term / Long-Term Care: </label> 
						<select name="LTC" id="LTC_select" data-table="application">
							<option value="short_term">Short-Term</option>
							<option value="long_term">Long-Term</option>
						</select>
					</li>
					<li>
						<label>Short-Term / Long-Term Care: </label><br>
						<form class="radio_form" data-table="application">
							<input type="radio" name="LTC" value="short_term"> Short-Term<br>
  						<input type="radio" name="LTC" value="long_term"> Long-Term<br>
  					</form>
					</li>
					<li>
						<label>Spousal Refusal: </label><br>
						<form class="radio_form"  data-table="application">
							<input type="radio" name="LTC" value=true> Yes<br>
  						<input type="radio" name="LTC" value=false> No<br>
  					</form>
					</li> -->
					<li>
						<label>Date of Birth:</label> 
						<span class="">{{alert.dob|date:"F d, Y"}}</span>
					</li>
					<li class="editableLi">
						<label>Address:</label> 
						<span class="editable" id="address" data-table="resident" data-alert_id="">{{alert.address}}</span>
					</li>
				</div>
				<div class="col-lg-4">
					<li class="editableLi">
						<label>City:</label> 
						<span class="editable" id="city" data-table="resident" data-alert_id="">{{alert.city}}</span>
					</li>
					<li class="editableLi">
						<label>State:</label> 
						<span class="editable" id="state" data-table="resident" data-alert_id="">{{alert.state}}</span>
					</li>
					<li class="editableLi">
						<label>Zip:</label> 
						<span class="editable" id="zip" data-table="resident" data-alert_id="">{{alert.zip}}</span>
					</li>
				</div>
				<div class="col-lg-4">			
					<li class="editableLi">
						<label>County:</label> 
						<span class="editable" id="county" data-table="resident" data-alert_id="">{{alert.county}}</span>
					</li>
					<li class="editableLi">
						<label>Marital Status:</label> 
						<span class="editable" id="marital_status" data-table="resident" data-alert_id="">{{alert.marital_status}}</span>
					</li>
					<li>
						<label>Facility:</label> 
						<span class="">{{alert.facility}}</span>
					</li>
					<li class="invisible absolute" id="residentId">{{alert.resident_id}}</li>
				</div>
			</div>
		</ul>
	</section>
	<section>
		<h4>Insurance Information:</h4>
		<ul>
			<div class="row">
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Primary Payor:</label> 
						<span class="editable" id="primary_payor" data-table="resident" data-alert_id="">{{alert.primary_payor}}</span>
					</li>
					<li class="editableLi">
						<label>Secondary Payor:</label> 
						<span class="editable" id="secondary_payor" data-table="resident" data-alert_id="">{{alert.secondary_payor}}</span>
					</li>
				</div>
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Copays:</label> 
						<span class="editable" id="copays" data-table="application" data-alert_id="">{{application.copays}}</span>
					</li>
					<li class="editableLi">
						<label>Copays Start Date:</label> 
						<span class="editable" id=""></span>
					</li>
					<li class="editableLi">
						<label>Secondary Insurance Copay Percentage:</label> 
						<span class="editable" id="secondary_pays_copay" data-table="application" data-alert_id="">{{application.secondary_pays_copay}}</span>
					</li>
				</div>
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Last Medicare Date:</label> 
						<span class="editable date">{{application.medicaid_pickup_date}}</span>
					</li>
					<li class="editableLi">
						<label>Cut From Medicare/Insurance Date:</label> 
						<span class="editable date">{{application.medicaid_pickup_date}}</span>
					</li>
				</div>
			</div>
		</ul>
	</section>
	<section>
		<h4>Medicaid Application Information:</h4>
		<ul>
			<div class="row">
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Status: </label> 
						<span class="editable" id="status" data-table="application" data-alert_id="">Pending</span>
					</li>
					<li class="editableLi">
						<label>Is Medicaid Pending?</label> 
						<span class="editable" id="is_medicaid_pending" data-table="application" data-alert_id="">{{application.is_medicaid_pending}}</span>
					</li>
					<li class="editableLi">
						<label>Medicaid Pickup Date:</label> 
						<span class="editable date" id="medicaid_pickup_date" data-table="application" data-alert_id=5>	{{application.medicaid_pickup_date}}</span>
					</li>
					<li>
						<label>Date of Medicaid Submission:</label>
						<span class="editable date" id="date_of_medicaid_submission" data-table="application" data-alert_id="">{{application.date_of_medicaid_submission}}</span>
					</li>
					<li class="editableLi">
						<label>Application County:</label> 
						<span class="editable" id="application_county" data-table="application" data-alert_id="">{{application.application_county}}</span>
					</li>
					<li class="editableLi">
						<label>Application State:</label> 
						<span class="editable" id="application_state" data-table="application" data-alert_id="">{{application.application_state}}</span>
					</li>				
				</div>
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Application Type:</label> 
						<span class="editable" id="application_type" data-table="application" data-alert_id="">{{application.application_type}}</span>
					</li>
					<!-- <li class="editableLi">
						<label></label> 
						<span class="editable" id="spousal" data-table="application" data-alert_id="">{{application.spousal}}</span>
					</li> -->
					<li>
						<label>Spousal/Single:</label> 
						<select name="spousal" id="spousal_select" data-table="application">
							<option value="">Please Select One</option>
							<option value="single" id="single">Single</option>
							<option value="spousal" id="spousal">Spousal</option>
						</select>
					</li>
					<li class="editableLi">
						<label>Estimated NAMI/Income Contribution Amount:</label>
					</li>
					<li class="editableLi">
						<label>Short-term/Long-Term Care:</label> 
			 			<span class="editable" id="LTC" data-table="application" data-alert_id="">
							{% if application.LTC %}
	   						Long-Term Care
	  					{% elif application.LTC == False %}
	   						Short-Term Care
	   					{% else %}
	   						 
							{% endif %}
						</span>
					</li>
					<li class="editableLi">
						<label>Spousal Refusal:</label> 
						<span class="editable" id="spousal_refusal" data-table="application" data-alert_id="">{{application.spousal_refusal}}</span>
					</li>
							<li>
						<label>Date of RFI:</label> 
						<span class="editable date" id="date_of_rfi" data-table="application" data-alert_id="">{{application.date_of_rfi}}</span>
					</li>
				</div>
				<div class="col-lg-4">
					<li>
						<label>Date of Deadline:</label> 
						<span class="editable date" id="date_of_deadline" data-table="application" data-alert_id="">{{application.date_of_deadline}}</span>
					</li>
					<li>
						<label>Date of appointment with applicant (if required):</label> 
						<span class="editable date" id="appointment_date" data-table="application" data-alert_id="">{{application.appointment_date}}</span>
					</li>
					<li class="editableLi">
						<label>DSS Contact Address:</label> 
						<span class="editable" id="dss_contact_address" data-table="application" data-alert_id="">{{application.dss_contact_address}}</span>
					</li>
					<li class="editableLi">
						<label>DSS Contact Phone:</label> 
						<span class="editable" id="dss_contact_phone" data-table="application" data-alert_id="">{{application.dss_contact_phone}}</span>
					</li>
					<li class="editableLi">
						<label>DSS Contact Email:</label> 
						<span class="editable" id="dss_contact_email" data-table="application" data-alert_id="">{{application.dss_contact_email}}</span>
					</li>
					<li class="editableLi">
						<label>DSS Contact Fax:</label> 
						<span class="editable" id="dss_contact_fax" data-table="application" data-alert_id="">{{application.dss_contact_fax}}</span>
					</li>
				</div>
			</div>
		</ul>
	</section>

	<section>
		<h4>Document Upload:</h4>
		<ul>
			<div class="row">
				<div class="col-lg-4">
					<form class="fileInputLi" id="medicaid_application" method="post" enctype="multipart/form-data">
		  			{% csrf_token %}
						<label>Upload Medicaid Application Here:</label>
						<input type="file" name="medicaid_application" value="{{application.medicaid_application}}" accept="image/jpeg
						,image/png,application/pdf" multiple>
						<input type="hidden" name="resident_id" value="{{alert.resident_id}}">
						<input type="hidden" name="file_type" value="medicaid_application">
						<button type="submit" class="uploadBtn">Upload</button>
					</form>
					<form class="fileInputLi" id="medicaid_confirmation" method="post" enctype="multipart/form-data">
			 			{% csrf_token %}
						<label>Upload Medicaid Confirmation Here:</label>
						<input type="file" name="medicaid_confirmation" value="{{application.medicaid_comfirmation}}" accept="image/jpeg
						,image/png,application/pdf" multiple>
						<input type="hidden" name="resident_id" value="{{alert.resident_id}}">
						<input type="hidden" name="file_type" value="medicaid_confirmation">
						<button type="submit" class="uploadBtn">Upload</button>
					</form>
				</div>
				<div class="col-lg-4">
					<form class="fileInputLi" id="rfi" method="post" enctype="multipart/form-data">
			 			{% csrf_token %}
						<label>Upload Medicaid RFI Here:</label>
						<input type="file" name="rfi" value="{{application.rfi}}" accept="image/jpeg
						,image/png,application/pdf" multiple>
						<input type="hidden" name="resident_id" value="{{alert.resident_id}}">
						<input type="hidden" name="file_type" value="rfi">
						<button type="submit" class="uploadBtn">Upload</button>
					</form>
					<form class="fileInputLi" id="medicaid_approval" method="post" enctype="multipart/form-data">
			 			{% csrf_token %}
						<label>Upload Medicaid Approval Here:</label>
						<input type="file" name="medicaid_approval" value="{{application.medicaid_approval}}" accept="image/jpeg
						,image/png,application/pdf" multiple>
						<input type="hidden" name="resident_id" value="{{alert.resident_id}}">
						<input type="hidden" name="file_type" value="medicaid_approval">
						<button type="submit" class="uploadBtn">Upload</button>
					</form>
				</div>
				<!-- <div class="col-lg-4"> -->
					
				<!-- </div> -->
			</div>
		</ul>
	</section>
	<!-- <div class="approveBtnDiv"> -->
		<button class="btn btn-success centered" id="approveBtn">Approve</button>
	<!-- </div> -->
	<section id="approvedSection">
		<h4>Approval Information:</h4>
		<ul>
			<div class="row">
				<div class="col-lg-4">
					<li class="editableLi">
						<label>Approval Notice Date:</label>
						 <span class="editable date" id="approval_notice_date" data-table="application" data-alert_id="">{{application.approval_notice_date}}</span>
					</li>
					<li class="editableLi">
						<label>Approval Start Date:</label>
						 <span class="editable date" id="approval_start_date" data-table="application" data-alert_id="">{{application.approval_start_date}}</span>
					</li>
					<li class="editableLi">
						<label>Approval End Date:</label>
						 <span class="editable date" id="approval_end_date" data-table="application" data-alert_id="">{{application.approval_end_date}}</span>
					</li>
				</div>
				<div class="col-lg-4">
					<li class="editableLi">
						<label>NAMI/Income Contribution Amount:</label> 
			 			<span class="editable">Unknown</span>
					</li>
					<li class="editableLi">
						<label>Fair Hearing Required?</label> 
			 			<span class="editable" id="fair_hearing_required">{{application.fair_hearing_required}}</span>
					</li>
					<li class="editableLi">
						<label>Date of Medicaid Recertification:</label> 
						<span class="editable date">{{application.date_of_medicaid_recertification}}</span>
					</li>
				</div>
				<div class="col-lg-4">

				</div>
			</div>
		</ul>
	</section>
</div>
{% endblock %}
{% load static %}
{% block scripts %}
<script src="{% static 'js/show.js' %}"></script>
	{% if application.spousal != null %}
		<script type="text/javascript">
			const option = document.getElementById("{{application.spousal}}");
			option.setAttribute("selected", "selected");
		</script>
	{% endif %}
{% endblock %}

<!--
•	Any admission that is Medicaid (or MLTC) should have a page created. The page should have:
o	Name of resident (preferably generated from NCS)
o	Admission date (preferably generated from NCS)
o	Medicaid Pickup Date (i.e. the date from which Medicaid is needed to cover)
o	Application type (New application, conversion, recertification – single, spousal, SSI)
o	County in which the application is being filed (specific to most states which have a county system)
o	Applicant resource information
o	Income and NAMI information (preferably generated from NCS)

Application History
The program should include the following fields for data entry
•	Date of application submission
o	Field to upload the Medicaid application (requirements will vary by state)
o	Field to upload confirmation of receipt by the Medicaid office
•	Date of RFI issued by the Medicaid Office
o	Field to upload RFI
•	Date of RFI deadline
•	Items required for the RFI (have it become a checklist once typed in as we have in some other programs)
•	Note section for correspondence with the Medicaid office
If approved
•	Date of Medicaid approval
o	Field to upload Medicaid approval
•	Date recertification is needed
If denied
•	Date of Medicaid Denial
o	Field to upload Medicaid denial
•	Date of fair hearing request
o	Field to upload confirmation of fair hearing request
•	Date of fair hearing
o	Field to upload fair hearing notice
•	Denial triggers the need for new application which should restart the process
-->
