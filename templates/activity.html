{% extends 'base.html' %}

{% block title %}Activity{% endblock %}

{% block content %}

  <h3>Activity</h3>
  <h4>New Admissions (<span class="countSpan" id="newAdmissionsTableCount"></span>):</h4>
  <table class="newAlertsTable">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Facility</th>
        <th>Primary Payor</th>
        <th>Secondary Payor</th>
        <th>Admission Date</th>
        <th>Track</th>
        <th>Don't Track</th>
      </tr>
    </thead>
    <tbody id="newAdmissionsTable">
      {% for obj in list %}
        {% if obj.activity_type == 'A' %}
        <tr id="{{obj.patient_id}}">
          <td>{{obj.first_name}}</td>
          <td>{{obj.last_name}}</td>
          <td>{{obj.facility}}</td>
          <td>{{obj.primary_payor}}</td>
          <td>{{obj.secondary_payor}}</td>
          <td>{{obj.activity_date}}</td>
          <td class="trackBtnCell"><button class="btn-track">Track</button></td>
          <td><button class="btn-ignore">Don't Track</button></td>
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
  <h4>Payor Changes (<span class="countSpan" id="payorChangesTableCount"></span>):</h4>
  <table class="newAlertsTable" id="table1">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Facility</th>
        <th>Primary Payor</th>
        <th>Secondary Payor</th>
        <th>Date of Payor Change</th>
        <th>Track</th>
        <th>Don't Track</th>
      </tr>
  </thead>
  <tbody  id="payorChangesTable">
      {% for obj in list %}
        {% if obj.activity_type == 'P' %}
        <tr id="{{obj.patient_id}}">
          <td>{{obj.first_name}}</td>
          <td>{{obj.last_name}}</td>
          <td>{{obj.facility}}</td>
          <td>{{obj.primary_payor}}</td>
          <td>{{obj.secondary_payor}}</td>
          <td>{{obj.activity_date}}</td>
          <td class="trackBtnCell"><button class="btn-track">Track</button></td>
          <td><button class="btn-ignore">Don't Track</button></td>
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>


  <h4>Discharges (<span class="countSpan" id="dischargesTableCount"></span>):</h4>
  <table class="newAlertsTable">
    <thead>
      <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Facility</th>
      <th>Primary Payor</th>
      <th>Secondary Payor</th>
      <th>Discharge Date</th>
      <th>Track</th>
      <th>Don't Track</th>
    </tr>
  </thead>
  <tbody  id="dischargesTable">
      {% for obj in list%}
        {% if obj.activity_type == 'D' %}
        <tr id="{{obj.patient_id}}">
          <td>{{obj.first_name}}</td>
          <td>{{obj.last_name}}</td>
          <td>{{obj.facility}}</td>
          <td>{{obj.primary_payor}}</td>
          <td>{{obj.secondary_payor}}</td>
          <td>{{obj.activity_date}}</td>
          <td class="trackBtnCell"><button class="btn-track">Track</button></td>
          <td><button class="btn-ignore">Don't Track</button></td>
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>

<!-- 
// $(document).ready(function() {

//        Dtable1 =$('#example').DataTable({



//          "scrollY":$('#example').closest('.container-fluid').height()+ "px",
//          "scrollCollapse": true,
//          "paging":         false,
//          "columnDefs": [ {
//             "targets": -1,
//             "data": null,
//             "defaultContent": '<button class="getData"type="button">Track</button>  <button class = "ignore" type="button">Ignore</button> '
//         } ]});
//        Dtable2 = $('#example2').DataTable({
//          "scrollY":        "300px",
//          "scrollCollapse": true,
//          "paging":         false,
//          "columnDefs": [ {
//             "targets": -1,
//             "data": null,
//             "defaultContent": '<button class="undo">Undo</button>'
//         } ]});
//        var counter = 0;

//     $('#example').on( 'click', '.getData', function () {
//         var data= Dtable1.row( $(this).parents('tr') ).data();
//         Dtable1.row( $(this).parents('tr') ).remove().draw();
//         Dtable2.row.add( [
//             data[0],
//             data[0],
//             data[0],
//             data[0],
//             data[0],
//         ] ).draw( false );
//         counter++;
//     } );

//     $('#example').on( 'click', '.ignore', function () {
//         Dtable1.row( $(this).parents('tr') ).remove().draw();

//     } );

//     $('#example2 tbody').on( 'click', '.undo', function () {
//       var data= Dtable2.row( $(this).parents('tr') ).data();
//       Dtable2.row( $(this).parents('tr') ).remove().draw();
//       Dtable1.row.add( [
//           data[0],
//           data[0],
//           data[0],
//           data[0],
//           data[0],
//       ] ).draw( false );



//     } );
// } );

 </script> -->

{% endblock %}

{% load static %}
{% block scripts %}
      <script src="{% static 'js/activity.js' %}"></script>
{% endblock %}

